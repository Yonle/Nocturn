NOC-02
======

Tracker System
--------------

`draft` `mandatory`

This specification defines the tracker protocol that should be implemented by every client for querying list of available relays, or disabled by client for configuring relays manually.

## Communications between clients and tracker

Tracker expose a websocket endpoint to which clients can connect.

### Client to Tracker

Clients can send 2 types of messages, which must be JSON arrays, according to the following patterns:

- `["DIR"]`, used to getting a list of relays.
- `["SUBMIT", <relay-url>]`, used to submit relay to an tracker with an URL.

When a client submit an relay totracker, The tracker should check that the requested relay is active. Tracker may reject `SUBMIT` request if the following is met:

- Relay is already on directory
- Submitted relay is blacklisted
- Tracker is based on whitelist approach.

### Tracker to Client

Relays can send 2 types of messages, which must also be JSON arrays, according to the following patterns:

- `["DIR", <arrays of relay urls>]`, used to send list of relay URLs to clients, Which then the client connects to the listed relays.
- `["NOTICE", <message>]`, used to send message to client.
- `["OK", <relay-url>]`, used to let client know that the requested relay URL has been listed.
